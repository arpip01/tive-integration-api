// This is your Prisma schema file

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// RawWebhookEvent - matches database columns
model RawWebhookEvent {
  id             Int      @id @default(autoincrement())
  provider       String
  deviceImei     String   @map("deviceImei")
  deviceName     String?  @map("deviceName")
  entryTimeEpoch BigInt   @map("entryTimeEpoch")
  payload        Json
  warnings       String?
  receivedAt     DateTime @default(now()) @map("receivedAt")

  @@map("RawWebhookEvent")
}

// PxSensorEvent - matches database columns
model PxSensorEvent {
  id          Int      @id @default(autoincrement())
  deviceimei  String
  timestamp   DateTime
  provider    String
  payload     Json
  temperature Float?
  humidity    Float?
  lightlevel  Float?
  type        String?
  deviceid    String?

  @@unique([deviceimei, timestamp, provider], name: "deviceimei_timestamp_provider")
  @@map("PxSensorEvent")
}

// PxLocationEvent - matches database columns
model PxLocationEvent {
  id               Int      @id @default(autoincrement())
  deviceimei       String
  timestamp        DateTime
  provider         String
  payload          Json
  latitude         Float?
  longitude        Float?
  locationaccuracy Float?
  batterylevel     Float?
  cellulardbm      Int?
  wifiaccesspoints Int?
  locationsource   String?
  type             String?
  deviceid         String?

  @@unique([deviceimei, timestamp, provider], name: "deviceimei_timestamp_provider")
  @@map("PxLocationEvent")
}
